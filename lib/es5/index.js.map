{"version":3,"file":"index.js","sources":["../../src/videoPlayer.tsx","../../src/Modules/mp4-video.tsx","../../src/Modules/flash-video.tsx","../../src/Modules/hls-video.tsx","../../src/index.tsx"],"sourcesContent":["/**\n * email allenwill211@gmail.com\n * Created by allen on 2018/6/30.\n */\n\nimport * as React from 'react';\nimport * as _vj from 'video.js';\n\nconst defaultEvents = [\n  'loadeddata',\n  'canplay',\n  'canplaythrough',\n  'play',\n  'pause',\n  'waiting',\n  'playing',\n  'ended',\n  'error',\n];\n// interface IProps {\n//   option?: any;\n//   events?: any[];\n//   play?: object;\n//   pause?: object;\n//   ended?: object;\n//   loadeddata?: object;\n//   waiting?: object;\n//   playing?: object;\n//   timeupdate?: object;\n//   canplay?: object;\n//   canplaythrough?: object;\n//   statechanged?: object;\n//   ready?: object;\n// }\nconst videojs = _vj\nexport default class VideoPlayer extends React.Component<any, any> {\n  private videoDom: any;\n  private setVideoDom: any;\n  private player: any;\n\n  private globalOption: any = {\n    controls: true,\n    errorDisplay: false,\n    preload: 'auto',\n    controlBar: {\n      remainingTimeDisplay: false,\n      playToggle: {},\n      progressControl: {},\n      fullscreenToggle: {},\n      volumeMenuButton: {\n        inline: false,\n        vertical: true\n      }\n    },\n    techOrder: ['html5'],\n    plugins: {}\n  }\n\n  constructor(props: any) {\n    super(props)\n    this.setVideoDom =  (element: any) => {\n      this.videoDom = element\n    }\n  }\n\n  componentDidMount() {\n    this.globalOption = Object.assign(this.globalOption, this.props.option)\n    console.log('globalOption', this.globalOption)\n    this.initPlayer();\n  }\n\n  public initPlayer() {\n    const self:any = this\n    this.player = videojs(this.videoDom, this.globalOption, function (this: any) {\n      const events = defaultEvents.concat(self.props.events || [])\n      for (let i = 0; i < events.length; i++) {\n        this.on(events[i], () => {\n          self.emitPlayerState(events[i], true)\n        })\n      }\n\n      this.on('timeupdate', function (this: any) {\n        self.emitPlayerState('timeupdate', this.currentTime())\n      })\n      self.props.ready(this);\n    });\n  }\n\n  public emitPlayerState(event: any, value: any) {\n    if (event && !!this.props[event]) {\n      this.props[event](this.player);\n    }\n    if (value) {\n      this.props.statechanged({[event]: value});\n    }\n  }\n\n\n  render() {\n    return (\n      <div>\n        <video className=\"video-js\" ref={this.setVideoDom}></video>\n      </div>\n    );\n  }\n}\n","/**\n * email allenwill211@gmail.com\n * Created by allen on 2018/6/30.\n */\n\nimport * as React from 'react';\nimport VideoPlayer from '../videoPlayer';\n\nexport default class Mp4VideoPlayer extends React.Component<any, any> {\n  private playerOption = {\n    height: '360',\n    autoplay: true,\n    muted: true,\n    language: 'en',\n    playbackRates: [0.5, 1, 1.5, 2],\n    sources: [{\n      type: \"video/mp4\",\n      // mp4\n      src: \"http://vjs.zencdn.net/v/oceans.mp4\",\n      // webm\n      // src: \"https://cdn.theguardian.tv/webM/2015/07/20/150716YesMen_synd_768k_vp8.webm\"\n    }],\n    poster: \"https://surmon-china.github.io/vue-quill-editor/static/images/surmon-1.jpg\",\n  }\n\n  public onPlayerPlay(player: any) {\n    // console.log('player play!', player)\n  }\n  public onPlayerPause(player: any) {\n    // console.log('player pause!', player)\n  }\n  public onPlayerEnded(player: any) {\n    // console.log('player ended!', player)\n  }\n  public onPlayerLoadeddata(player: any) {\n    // console.log('player Loadeddata!', player)\n  }\n  public onPlayerWaiting(player: any) {\n    // console.log('player Waiting!', player)\n  }\n  public onPlayerPlaying(player: any) {\n    // console.log('player Playing!', player)\n  }\n  public onPlayerTimeupdate(player: any) {\n    // console.log('player Timeupdate!', player.currentTime())\n  }\n  public onPlayerCanplay(player: any) {\n    // console.log('player Canplay!', player)\n  }\n  public onPlayerCanplaythrough(player: any) {\n    // console.log('player Canplaythrough!', player)\n  }\n  // or listen state event\n  public playerStateChanged(playerCurrentState: any) {\n    // console.log('player current update state', playerCurrentState)\n  }\n  // player is ready\n  public playerReadied(player: any) {\n    // seek to 10s\n    // console.log('example player 1 readied', player)\n    // player.currentTime(10)\n    // console.log('example 01: the player is readied', player)\n  }\n\n    render() {\n      return (\n        <div>\n\n          <VideoPlayer\n            option={this.playerOption}\n            play={this.onPlayerPlay}\n            pause={this.onPlayerPause}\n            ended={this.onPlayerEnded}\n            loadeddata={this.onPlayerLoadeddata}\n            waiting={this.onPlayerWaiting}\n            playing={this.onPlayerPlaying}\n            timeupdate={this.onPlayerTimeupdate}\n            canplay={this.onPlayerCanplay}\n            canplaythrough={this.onPlayerCanplaythrough}\n            statechanged={this.playerStateChanged}\n            ready={this.playerReadied}\n          />\n        </div>\n      );\n    }\n  }\n","/**\n * email allenwill211@gmail.com\n * Created by allen on 2018/6/30.\n */\n\nimport * as React from 'react';\nimport VideoPlayer from '../videoPlayer';\n// import 'videojs-hotkeys'\n\nexport default class FlashVideoPlayer extends React.Component<any, any> {\n  private playerOption = {\n\n    height: '360',\n    sources: [{\n      type: 'video/x-flv',\n      src: 'http://fms.cntv.lxdns.com/live/flv/channel96.flv'\n    }],\n    controlBar: {\n      timeDivider: false,\n      durationDisplay: false\n    },\n    techOrder: ['flash', 'html5'],\n    sourceOrder: true,\n    flash: {\n      hls: {withCredentials: false},\n    },\n    html5: {hls: {withCredentials: false}},\n    poster: \"https://surmon-china.github.io/vue-quill-editor/static/images/surmon-6.jpg\"\n  }\n\n  // or listen state event\n  public playerStateChanged(playerCurrentState: any) {\n    console.log('player current update state', playerCurrentState)\n  }\n\n  // player is ready\n  public playerReadied(player: any) {\n    console.log('example 2 ready!', player)\n    // player.hotkeys({\n    //   volumeStep: 0.1,\n    //   seekStep: 5,\n    //   enableModifiersForNumbers: false,\n    //   fullscreenKey: function (event: any, player) {\n    //     // override fullscreen to trigger when pressing the F key or Ctrl+Enter\n    //     return ((event.which === 70) || (event.ctrlKey && event.which === 13));\n    //   }\n    // })\n  }\n\n  render() {\n    return (\n      <div>\n\n        <VideoPlayer\n          option={this.playerOption}\n          statechanged={this.playerStateChanged}\n          ready={this.playerReadied}\n        />\n      </div>\n    );\n  }\n}\n","/**\n * email allenwill211@gmail.com\n * Created by allen on 2018/7/01.\n */\n\nimport * as React from 'react';\nimport VideoPlayer from '../videoPlayer';\n\nexport default class HlsVideoPlayer extends React.Component<any, any> {\n  private playerOption = {\n    // videojs and plugin options\n    height: '360',\n    sources: [{\n      withCredentials: false,\n      type: \"application/x-mpegURL\",\n      src: \"http://securelive.ainemo.com/devnemo/ff808081644115b801644460de3b00a7.m3u8?auth_key=aea522d5b4b86afb08dc47c8c0d6f4f8-1559467800-0a5192a63e654c008c62429bec3b21ed-\"\n    }],\n    controlBar: {\n      timeDivider: false,\n      durationDisplay: false\n    },\n    flash: {hls: {withCredentials: false}},\n    html5: {hls: {withCredentials: false}},\n    poster: \"https://surmon-china.github.io/vue-quill-editor/static/images/surmon-5.jpg\"\n  }\n\n// or listen state event\n  public playerStateChanged(playerCurrentState: any) {\n    console.log('player current update state', playerCurrentState)\n  }\n\n// player is ready\n  public playerReadied(player: any) {\n    console.log('example 2 ready!', player)\n    // player.hotkeys({\n    //   volumeStep: 0.1,\n    //   seekStep: 5,\n    //   enableModifiersForNumbers: false,\n    //   fullscreenKey: function (event: any, player) {\n    //     // override fullscreen to trigger when pressing the F key or Ctrl+Enter\n    //     return ((event.which === 70) || (event.ctrlKey && event.which === 13));\n    //   }\n    // })\n  }\n\n  render() {\n    return (\n      <div>\n\n        <VideoPlayer\n          option={this.playerOption}\n          statechanged={this.playerStateChanged}\n          ready={this.playerReadied}\n        />\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport 'video.js/dist/video-js.css';\nimport './index.scss';\n\nimport Mp4VideoPlayer from './Modules/mp4-video'\nimport FlashVideoPlayer from './Modules/flash-video'\nimport HlsVideoPlayer from './Modules/hls-video'\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <div>\n        <Mp4VideoPlayer/>\n        <FlashVideoPlayer/>\n        <HlsVideoPlayer/>\n      </div>\n    );\n  }\n}\n"],"names":["defaultEvents","videojs","_vj","React.Component","constructor","props","controls","errorDisplay","preload","controlBar","remainingTimeDisplay","playToggle","progressControl","fullscreenToggle","volumeMenuButton","inline","vertical","techOrder","plugins","setVideoDom","element","videoDom","componentDidMount","globalOption","Object","assign","option","console","log","initPlayer","self","player","events","concat","i","length","on","emitPlayerState","currentTime","ready","event","value","statechanged","render","React.createElement","className","ref","height","autoplay","muted","language","playbackRates","sources","type","src","poster","onPlayerPlay","onPlayerPause","onPlayerEnded","onPlayerLoadeddata","onPlayerWaiting","onPlayerPlaying","onPlayerTimeupdate","onPlayerCanplay","onPlayerCanplaythrough","playerStateChanged","playerReadied","VideoPlayer","playerOption","play","pause","ended","loadeddata","waiting","playing","timeupdate","canplay","canplaythrough","timeDivider","durationDisplay","sourceOrder","flash","hls","withCredentials","html5","playerCurrentState","Mp4VideoPlayer","FlashVideoPlayer","HlsVideoPlayer"],"mappings":"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"}